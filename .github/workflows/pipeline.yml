name: AQI Automation Pipeline

# Run every hour automatically
on:
  schedule:
    - cron: "0 * * * *"  # At the start of every hour
  workflow_dispatch:  # Optional: allows manual trigger

jobs:
  aqi_pipeline:
    name: AQI Automation Pipeline - Hourly
    runs-on: ubuntu-latest

    steps:
      # 1️⃣ Checkout your repository
      - name: Checkout Repo
        uses: actions/checkout@v4

      # 2️⃣ Setup Python
      - name: Setup Python 3.10
        uses: actions/setup-python@v4
        with:
          python-version: "3.10"

      # 3️⃣ Install dependencies
      - name: Install Dependencies
        run: pip install -r requirements.txt

      # 4️⃣ Run Feature Pipeline
      - name: Run Feature Pipeline
        run: python data/fetch_raw_data.py && python features/build_features.py

      # 5️⃣ Run Training Pipeline
      - name: Run Training Pipeline
        run: python models/train_models_compare.py
